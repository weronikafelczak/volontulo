<div *ngIf="isAdmin; else hasOrg">
  <p>Administrator nie może tworzyć nowych ofert.</p>
</div>
<ng-template #hasOrg>
  <ng-container *ngIf="!hasOrganization; else offerForm">
  <p>Aby dodać ofertę musisz posiadać organizację.
    <a href="{{ djangoRoot }}/organizations/create">Możesz ją założyć tutaj</a>
  </p>
  </ng-container>
</ng-template>
<ng-template #offerForm>
<h2>{{ inEditMode ? "Edycja" : "Tworzenie" }} oferty:</h2>
<form #offerForm="ngForm" (ngSubmit)="onSubmit(offer)">
  <div class="form-group row">
    <label for="title" class="col-sm-3 col-form-label">Tytuł oferty:</label>
    <div class="col-sm-6">
      <input 
        type="text"
        class="form-control"
        placeholder="Tytuł oferty..." 
        minlength="3"
        maxlength="150"
        id="title" name="title"
        [(ngModel)]="offer.title"
        #title="ngModel"
        required>
      <span class="form-text text-muted" *ngIf="!title.valid &&title.touched">To pole jest obowiązkowe.</span>
    </div>
    <div class="col-sm-3">Określ, jak oferta będzie nazywać się w systemie, staraj się być dokładnym.</div>
  </div>
  <div class="form-group row">
    <label for="location" class="col-sm-3 col-form-label">Miejsce odbywania wolontariatu:</label>
    <div class="col-sm-6">
      <input 
        type="text"
        class="form-control"
        placeholder="Miejsce odbywania wolontariatu..." 
        minlength="3"
        maxlength="150"
        id="location" name="location"
        [(ngModel)]="offer.location"
        #location="ngModel"
        required>
      <span class="form-text text-muted" *ngIf="!location.valid &&location.touched">To pole jest obowiązkowe.</span>
    </div>
    <div class="col-sm-3">Określ, w jakim miejscu odbywać się będzie wolontariat.</div>
  </div>
  <div class="form-group row">
    <label for="organization" class="col-sm-3 col-form-label">Z ramienia organizacji:</label>
    <div class="col-sm-6">
      <select class="form-control"
        id="organization" name="organization"
        [(ngModel)]="offer.organization"
        #organization="ngModel"
        required>
        <option  *ngFor="let organization of user['organizations']" [ngValue]="organization" >
          {{ organization.name }}</option>
      </select>
      <span class="form-text text-muted" *ngIf="!organization.valid &&organization.touched">To pole jest obowiązkowe.</span>
    </div>
    <div class="col-sm-3">Określ organizację odpowiedzialną za wolontariat.</div>
  </div>
  <h3>Realizacja akcji:</h3>
  <div class="form-group row">
    <label for="startedAt" class="col-sm-3 col-form-label">Dzień rozpoczęcia:</label>
    <div class="col-sm-3">
      <div class="form-check form-check-inline">
        <div class="input-group">
          <input 
            id="startedAt"
            type="datetime"
            class="form-control"
            min="2018-01-01"
            name="startedAt"
            [(ngModel)]="offer.startedAt"
            #startedAt="ngModel"
            required>
        </div>
      </div>
      <span class="form-text text-muted" *ngIf="startedAt.touched && !startedAt.valid">Podaj datę.</span>
    </div>
    <div class="col-sm-3">
      <div class="form-check form-check-inline">
          <input
          type="radio"
          value=true
          name="actionOngoing"
          [(ngModel)]="offer.actionOngoing"
          #actionOngoing="ngModel">
          Akcja już trwa
      </div>
    </div>
    <div class="col-sm-3">Określ datę rozpoczęcia akcji.</div>
  </div>
  <div class="form-group row ">
    <label for="finishedAt" class="col-sm-3 col-form-label">Dzień zakończenia:</label>
    <div class="col-sm-3">
      <div class="form-check form-check-inline">
        <div class="input-group">
          <input 
            type="datetime"
            class="form-control"
            min="2018-01-01"
            id="finishedAt"
            name="finishedAt"
            [(ngModel)]="offer.finishedAt"
            #finishedAt="ngModel"
            required>
        </div>
      </div>
      <span class="form-text text-muted" *ngIf="finishedAt.touched &&!finishedAt.valid">Podaj datę (w formacie RRRR-MM-DD).</span>
    </div>
      <div class="col-sm-3">
      <div class="form-check">
          <input  
          type="radio"
          value="true"
          name="constantCoop"
          [(ngModel)]="offer.constantCoop"
          #constantCoop="ngModel">Akcja nie kończy się (ciągła współpraca)
      </div>
    </div>
    <div class="col-sm-3">Określ datę zakończenia akcji (w formacie RRRR-MM-DD).</div>
  </div>
  <div class="form-group row">
    <label for="startedAt" class="col-sm-3 col-form-label">Rekrutacja:</label>
    <div class="col-sm-6">
      <div class="form-check form-check-inline">
        <div class="card">
          <h5 class="card-header">Rekrutacja podstawowa</h5>
          <div class="card-body">
            <div class="form-group row">
              <label for="recruitmentStartDate" class="col-sm-3 col-form-label">Początek:</label>
              <div class="col-sm-9">
                <input 
                type="datetime"
                min="2018-01-01"
                class="form-control"
                id="recruitmentStartDate" name="recruitmentStartDate"
                [(ngModel)]="offer.recruitmentStartDate"
                #recruitmentStartDate="ngModel"
                required>
                <span class="form-text text-muted" *ngIf="recruitmentStartDate.touched &&!recruitmentStartDate.valid">To pole jest obowiązkowe.</span>
              </div>
            </div>
            <div class="form-group row">
              <label for="recruitmentEndDate" class="col-sm-3 col-form-label">Koniec:</label>
              <div class="col-sm-9">
                <input 
                type="datetime"
                class="form-control"
                minlength="3"
                maxlength="150"
                id="recruitmentEndDate" name="recruitmentEndDate"
                [(ngModel)]="offer.recruitmentEndDate"
                #recruitmentEndDate="ngModel"
                required>
                <span class="form-text text-muted" *ngIf="recruitmentEndDate.touched && !recruitmentEndDate.valid">To pole jest obowiązkowe.</span>
              </div>
            </div>
            <div class="form-group row">
              <label for="volunteersLimit" class="col-sm-3 col-form-label">Limit wolontariuszy:</label>
              <div class="col-sm-6">
                <input 
                  type="number"
                  class="form-control"
                  placeholder="0" 
                  min="0"
                  id="volunteersLimit" name="volunteersLimit"
                  [(ngModel)]="offer.volunteersLimit"
                  #volunteersLimit="ngModel">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="form-check form-check-inline">
        <div class="card">
          <h5 class="card-header">Rekrutacja rezerwowa</h5>
          <div class="card-body">
            <div class="form-group row">
              <label for="reserveRecruitmentStartDate" class="col-sm-3 col-form-label">Początek:</label>
              <div class="col-sm-9">
                <input 
                type="datetime"
                class="form-control"
                id="reserveRecruitmentStartDate" name="reserveRecruitmentStartDate"
                [(ngModel)]="offer.reserveRecruitmentStartDate"
                #reserveRecruitmentStartDate="ngModel">
              </div>
            </div>
            <div class="form-group row">
              <label for="reserveRecruitmentEndDate" class="col-sm-3 col-form-label">Koniec:</label>
              <div class="col-sm-9">
                <input 
                type="datetime"
                class="form-control"
                id="reserveRecruitmentEndDate" name="reserveRecruitmentEndDate"
                [(ngModel)]="offer.reserveRecruitmentEndDate"
                #reserveRecruitmentEndDate="ngModel">
              </div>
            </div>
            <div class="form-group row">
              <label for="reserveVolunteersLimit" class="col-sm-3 col-form-label">Limit wolontariuszy:</label>
              <div class="col-sm-6">
                <input 
                  type="number"
                  class="form-control"
                  placeholder="0" 
                  min="0"
                  id="reserveVolunteersLimit" name="reserveVolunteersLimit"
                  [(ngModel)]="offer.reserveVolunteersLimit"
                  #reserveVolunteersLimit="ngModel">
              </div>
            </div>
          </div>
        </div>
      </div>
      </div>
      <div class="col-sm-3">Określ ramy czasowe (w formacie RRRR-MM-DD) oraz liczbę wolontariuszy, odpowiednio dla rezerwacji podstawowej i rozerwowej.</div>
  </div>
  <div class="form-group row">
    <label for="description" class="col-sm-3 col-form-label">Opis oferty:</label>
    <div class="col-sm-6">
      <textarea
        type="text"
        class="form-control"
        placeholder="Opis oferty..." 
        minlength="3"
        maxlength="500"
        id="description" name="description"
        [(ngModel)]="offer.description"
        #description="ngModel"
        required>
      </textarea>
      <span class="form-text text-muted" *ngIf="!description.valid &&description.touched">To pole jest obowiązkowe.</span>
    </div>
    <div class="col-sm-3">Postaraj się dokładnie opisać akcję.</div>
  </div>
  <div class="form-group row">
      <label for="timeCommitment" class="col-sm-3 col-form-label">Wymagania czasowe:</label>
      <div class="col-sm-6">
        <input 
          type="text"
          class="form-control"
          placeholder="Wymagania czasowe..." 
          minlength="3"
          maxlength="150"
          id="timeCommitment" name="timeCommitment"
          [(ngModel)]="offer.timeCommitment"
          #timeCommitment="ngModel"
          required>
        <span class="form-text text-muted" *ngIf="!timeCommitment.valid &&timeCommitment.touched">To pole jest obowiązkowe.</span>
      </div>
      <div class="col-sm-3">Określ wymagania czasowe - ile godzin pracy w ciągu dnia wymaga dana akcja.</div>
    </div>
  <div class="form-group row">
    <label for="benefits" class="col-sm-3 col-form-label">Korzyści:</label>
    <div class="col-sm-6">
      <textarea
        type="text"
        class="form-control"
        placeholder="Korzyści dla wolontariusza..." 
        minlength="3"
        maxlength="500"
        id="benefits" name="benefits"
        [(ngModel)]="offer.benefits"
        #benefits="ngModel"
        required>
      </textarea>
      <span class="form-text text-muted" *ngIf="!benefits.valid &&benefits.touched">To pole jest obowiązkowe.</span>
    </div>
    <div class="col-sm-3">Określ korzyści płynące z udziału w akcji.</div>
  </div>
  <div class="form-group row">
    <label for="requirements" class="col-sm-3 col-form-label">Wymagania:</label>
    <div class="col-sm-6">
      <input 
        type="text"
        class="form-control"
        placeholder="Wymagania wobec wolontariusza..." 
        minlength="3"
        maxlength="150"
        id="requirements" name="requirements"
        [(ngModel)]="offer.requirements"
        #requirements="ngModel"
        required>
    </div>
    <div class="col-sm-3">Określ warunki, jakie musi spełnić kandydat, aby wziąć udział w akcji.</div>
  </div>
  <div class="d-flex justify-content-center">
      <button type="submit" name="submit" class="btn btn-primary">Zapisz {{ inEditMode ? "zmiany" : "ofertę" }}</button>
  </div>
</form>
</ng-template>
